贪吃蛇 设计文档

目的：制作贪吃蛇游戏

所需信息：
----------------
#####模型信息：(Model)

	- 常量：D，蛇身之间的间隙与方块所占空间的和，表示蛇移动的距离。

	- 配置：定时器，蛇每次移动距离D的间隔时间：1s(1000ms)。

	- 数据：数组类结构(下文简称数组)，存储蛇头及蛇身的位置，数组的首元素存储蛇头的位置。

	- 数据：蛇类，存储蛇的位置，及对蛇的操作。

	- 数据：食物类，存储食物的位置，及食物的颜色。

	- 常量：重合，一个方块的位置与另一个方块的位置完全相同。

	- 常量：蛇的移动方向。方向值为0~3，分别表示向右、上、下、左移动，初始值为0。


#####控制信息：(Controller)

	- 移动蛇：将数组的数据依次赋值给后面的元素，根据方向，每次将蛇向该方向移动D。

	步骤：
			
	0.根据方向不同，采取不同的策略移动蛇。

	方向向右，先删除数组最后一个元素，并在数组开头，插入一个新的元素作为蛇头，将将原来蛇头的水平方向增加距离D，赋值给新的元素。


例如，有如下初始数组a[4]:

| a[0] | a[1] | a[2] | a[3] |
|-----|-----|-----|-----|
|  3  |  2  |  1  |  0  |

当方向为0，则先删除数组最后一个的元素，数组变为：

| a[0] | a[1] | a[2] | a[3] |
|------|------|------|------|
|     |  3  |  2  |  1  |

再在数组首部插入新的元素，并将原来的数组首部增加D,然后赋值给新元素，则数组变为：

| a[0] | a[1] | a[2] | a[3] |
|-----|-----|-----|-----|
|  4  |  3  |  2  |  1  |

			其他方向，同理。

		1.重新绘制整条蛇。

	- 死亡蛇：整个蛇变灰，程序退出。

	- 未发生碰撞，根据方向值，判断在当前移动方向下，如果蛇头的下一个位置是空白，则未发生碰撞，蛇继续移动；否则，如果下一个位置是食物、墙、蛇自身，则发生碰撞。

	- 撞墙：蛇头位置超出矩形边框

	- 撞到蛇自身：蛇头位置与蛇自身任意一节重合。

	- 撞到食物：如果在当前移动方向下，蛇头移动的下一个位置是食物，则蛇发生增长，蛇身变长1个方块，蛇按照碰撞前的方向继续移动，在其他位置生成新的食物。

		步骤：

			0.向数组首部插入一个元素，作为新的蛇头，用来存储蛇头的信息

			1.将食物的位置数据，存储到蛇头中，颜色与原蛇头相同。

			2.蛇其他元素保持不变。

			3.重新绘制整条蛇。

例如，有如下初始数组a[4]:

| a[0] | a[1] | a[2] | a[3] |
|-----|-----|-----|-----|
|  3  |  2  |  1  |  0  |

方向为0，如果下一次移动将碰撞到食物，则向数组插入一个新元素：

| a[0] | a[1] | a[2] | a[3] | a[4] |
|-----|-----|-----|-----|-----|
|  4  |  3  |  2  |  1  |     |

将食物的数据插入到数组首元素中，则数组变为：

| a[0] | a[1] | a[2] | a[3] | a[4] |
|-----|-----|-----|-----|-----|
|  5  |  4  |  3  |  2  |  1  |

	- 用户输入：接收用户输入，根据用户输入的方向，改变方向值。


#####绘制信息：(View)

	- 定义：方格是一块矩形区域，方格可以被绘制成各种颜色。

	- 定义：方块，表示蛇的一节身体、头、食物，所有的方块由方格组成。

	- 定义：蛇身体之间的间隙，也是方块， 颜色为白色。

	- 定义：位置，相对于屏幕左上角的位置。

	- 配置：屏幕由很多方格组成，横向w_width个，纵向w_height个，颜色为空。

	- 配置：矩形边框，由方格组成，横向为b_width个，纵向b_height个，颜色为蓝色。

	- 配置：蛇身、头由方块表示，蛇头1个方块，蛇身n_body个方块，颜色为黑色。
		
	- 配置：食物由方格表示，食物不能与蛇重合，颜色为红色。

	- 常量：蛇初始状态，蛇头，蛇身1个方块，黑色，特定位置；食物，用多个方格表示，大小和蛇身一致，红色，特定位置。

	- 绘制边框：在特定位置上(左上角坐标)绘制指定颜色的矩形边框，边框宽高为b_width方格 X b_height方格。

	- 绘制蛇：循环遍历数组，获取到蛇的位置，方块的颜色，将蛇在特定位置画出。

	- 绘制食物：在随机的特定位置上生成1个食物。


游戏运行机制
---------------
1.首先根据蛇初始状态，绘制初始界面，即，绘制矩形边框、蛇和食物。

2.设置定时器为1s，即定时器每隔1s触发一次蛇移动，启动定时器。

3.读取用户输入，根据用户输入改变方向值。

4.根据方向值，移动蛇。

5.检测蛇是否发生碰撞，如果未发生碰撞，则跳转至Step3；否则，如果蛇发生碰撞，如果撞墙或者撞到自己，则死亡蛇，程序退出；否则，如果撞到食物，则蛇发生增长。

6.跳转至第3步。


